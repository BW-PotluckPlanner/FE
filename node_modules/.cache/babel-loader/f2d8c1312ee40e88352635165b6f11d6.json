{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/b-stockadmin/FE/src/components/Register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport * as Yup from \"yup\";\nimport axios from 'axios';\nimport { Link, Redirect } from \"react-router-dom\";\n\nfunction SignUp() {\n  _s();\n\n  const [redirect, setRedirect] = useState(false);\n  const [errors, setErrors] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    first_name: \"\",\n    last_name: \"\"\n  });\n  const [formState, setFormState] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    first_name: \"\",\n    last_name: \"\"\n  });\n  const [buttonDisabled, setButtonDisabled] = useState(true);\n  const [post, setPost] = useState([]);\n  const formSchema = Yup.object().shape({\n    name: Yup.string().min(3, \"Username must be at least 3 characters long.\").required(\"Must include username.\"),\n    email: Yup.string().email(\"Must be a valid email address.\").required(\"Must include email address.\"),\n    password: Yup.string().min(6, \"Passwords must be at least 6 characters long.\").required(\"Password is Required\"),\n    first_name: Yup.number().min(6, \"Passwords must be at least 6 characters long.\").required(\"Must include email address.\")\n  });\n  useEffect(() => {\n    formSchema.isValid(formState).then(valid => {\n      setButtonDisabled(!valid);\n    });\n  }, [formState]);\n\n  const inputChange = e => {\n    e.persist();\n    Yup.reach(formSchema, e.target.name).validate(e.target.value).then(valid => {\n      setErrors({ ...errors,\n        [e.target.name]: \"\"\n      });\n    }).catch(err => {\n      setErrors({ ...errors,\n        [e.target.name]: err.errors[0]\n      });\n    });\n    setFormState({ ...formState,\n      [e.target.name]: e.target.type === 'number' ? parseInt(e.target.value) : e.target.value\n    });\n  };\n\n  const formSubmit = e => {\n    e.preventDefault();\n    setErrors({ ...errors,\n      name: 'Submitting. Please wait . . . '\n    });\n    console.log(\"submitted!\");\n    const data = {\n      \"username\": formState.name,\n      \"password\": formState.password,\n      \"age\": formState.age,\n      \"first_name\": formState.first_name\n    };\n    axios.post(\"https://potluck-planner1220.herokuapp.com/api/auth/register\", data).then(res => {\n      axios.post(\"https://potluck-planner1220.herokuapp.com/api/auth/login\", data).then(res => {\n        console.log(\"success!\", res);\n        setFormState({\n          name: \"\",\n          email: \"\",\n          password: \"\",\n          age: 0\n        });\n        setErrors({ ...errors,\n          name: ''\n        });\n        localStorage.setItem('token', res.data.token);\n        localStorage.setItem(\"user_id\", res.data.id);\n        setRedirect(true);\n      }).catch(err => {\n        console.log(err.response);\n        setErrors({ ...errors,\n          name: err.response.data.message\n        });\n      });\n    }).catch(err => {\n      console.log(err.response);\n      setErrors({ ...errors,\n        name: err.response.data.message\n      });\n    });\n  };\n\n  if (redirect === true) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: formSubmit,\n    children: [\"Already have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/login\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 30\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 60\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"emailInput\",\n      children: [\"Username:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"nameInput\",\n        type: \"name\",\n        name: \"name\",\n        placeholder: \"Name\",\n        onChange: inputChange,\n        value: formState.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"emailInput\",\n      children: [\"Email:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"emailInput\",\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"Email\",\n        onChange: inputChange,\n        value: formState.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"passwordInput\",\n      children: [\"Password:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"passwordInput\",\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        onChange: inputChange,\n        value: formState.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"first_name\",\n      children: [\"Age:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"first_name\",\n        type: \"name\",\n        name: \"first_name\",\n        placeholder: \"Age\",\n        onChange: inputChange,\n        value: formState.first_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"last_name\",\n      children: [\"Age:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"last_name\",\n        type: \"name\",\n        name: \"last_name\",\n        placeholder: \"Age\",\n        onChange: inputChange,\n        value: formState.last_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      disabled: buttonDisabled,\n      children: \"Submit!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 5\n    }, this), errors.age.length > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: errors.age\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 31\n    }, this) : null, errors.email.length > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: errors.email\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 33\n    }, this) : null, errors.password.length > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: errors.password\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 36\n    }, this) : null, errors.first_name.length > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: errors.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 38\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SignUp, \"SA0OngBqEY0RQ+U08jV7FPTamQI=\");\n\n_c = SignUp;\nexport default SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["/Users/b-stockadmin/FE/src/components/Register.js"],"names":["React","useState","useEffect","Yup","axios","Link","Redirect","SignUp","redirect","setRedirect","errors","setErrors","username","email","password","first_name","last_name","formState","setFormState","buttonDisabled","setButtonDisabled","post","setPost","formSchema","object","shape","name","string","min","required","number","isValid","then","valid","inputChange","e","persist","reach","target","validate","value","catch","err","type","parseInt","formSubmit","preventDefault","console","log","data","age","res","localStorage","setItem","token","id","response","message","length"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport * as Yup from \"yup\";\nimport axios from 'axios'\nimport { Link, Redirect } from \"react-router-dom\";\n\n\nfunction SignUp() {\n\n  const [redirect, setRedirect] = useState(false);\n\n    const [errors, setErrors] = useState({  \n        username: \"\",\n        email: \"\",\n        password: \"\",\n        first_name: \"\",\n        last_name: \"\"\n      });\n      const [formState, setFormState] = useState({\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        first_name: \"\",\n        last_name: \"\"\n      });\n      const [buttonDisabled, setButtonDisabled] = useState(true);\n\n      const [post, setPost] = useState([]);\n\n    const formSchema = Yup.object().shape({\n        name: Yup\n        .string()\n        .min(3, \"Username must be at least 3 characters long.\")\n        .required(\"Must include username.\"),\n        email: Yup\n          .string()\n          .email(\"Must be a valid email address.\")\n          .required(\"Must include email address.\"),\n        password: Yup\n          .string()\n          .min(6, \"Passwords must be at least 6 characters long.\")\n          .required(\"Password is Required\"),\n        first_name: Yup\n        .number()\n        .min(6, \"Passwords must be at least 6 characters long.\")\n        .required(\"Must include email address.\")\n      });\n\n      useEffect(() => {\n        formSchema.isValid(formState).then(valid => {\n          setButtonDisabled(!valid);\n        });\n      }, [formState]);\n\n      \n\n      const inputChange = e => {\n        e.persist();\n        Yup\n        .reach(formSchema, e.target.name)\n        .validate(e.target.value)\n        .then(valid => {\n          setErrors({\n            ...errors,\n            [e.target.name]: \"\"\n          });\n        })\n        .catch(err => {\n          setErrors({\n            ...errors,\n            [e.target.name]: err.errors[0]\n          });\n        });\n        setFormState({\n          ...formState,\n          [e.target.name]: e.target.type === 'number' ? parseInt(e.target.value) : e.target.value\n      })\n    };\n\n    const formSubmit = e => {\n        e.preventDefault();\n        setErrors({\n          ...errors,\n          name: 'Submitting. Please wait . . . '\n        });\n        console.log(\"submitted!\");\n        const data = {\"username\": formState.name,\n        \"password\": formState.password, \n        \"age\": formState.age,\n        \"first_name\": formState.first_name};\n        axios\n          .post(\"https://potluck-planner1220.herokuapp.com/api/auth/register\", data)\n          .then(res => {\n            axios\n          .post(\"https://potluck-planner1220.herokuapp.com/api/auth/login\", data)\n          .then(res => {\n            console.log(\"success!\", res);\n            setFormState({name: \"\",\n            email: \"\",\n            password: \"\",\n            age: 0})\n            setErrors({\n              ...errors,\n              name: ''\n            });\n            localStorage.setItem('token', res.data.token);\n            localStorage.setItem(\"user_id\", res.data.id)\n\n            setRedirect(true);\n\n          })\n          .catch(err => {\n            \n            console.log(err.response)\n            setErrors({\n              ...errors,\n              name: err.response.data.message\n            });\n\n          }\n          );\n          })\n          .catch(err => {\n            \n            console.log(err.response)\n            setErrors({\n              ...errors,\n              name: err.response.data.message\n            });\n          }\n          );\n      };\n\n  if (redirect === true) {\n    return <Redirect to='/' />\n  }\n    \n  return (\n\n    \n    <form onSubmit={formSubmit}>\n    Already have an account? <Link to='/login'>Login</Link><br/>\n\n    <label htmlFor=\"emailInput\">\n      Username:\n      <input id=\"nameInput\" type=\"name\" name=\"name\" placeholder=\"Name\"  onChange={inputChange} value = {formState.name}/>\n    </label>\n    \n    <br/>\n    <label htmlFor=\"emailInput\">\n      Email:\n      <input id=\"emailInput\" type=\"email\" name=\"email\" placeholder=\"Email\"  onChange={inputChange} value = {formState.email}/>\n    </label>\n       \n    <br/>\n    <label htmlFor=\"passwordInput\">\n      Password:\n      <input id=\"passwordInput\" type=\"password\" name=\"password\" placeholder=\"Password\"  onChange={inputChange} value = {formState.password}/>\n    </label>\n    \n    <br/>\n    <label htmlFor=\"first_name\">\n      Age:\n      <input id=\"first_name\" type=\"name\" name=\"first_name\" placeholder='Age'  onChange={inputChange} value = {formState.first_name}/>\n    </label>\n    <br/>\n    <label htmlFor=\"last_name\">\n      Age:\n      <input id=\"last_name\" type=\"name\" name=\"last_name\" placeholder='Age'  onChange={inputChange} value = {formState.last_name}/>\n    </label>\n   \n    <br/>\n    <button disabled = {buttonDisabled} >Submit!</button>\n    {errors.age.length > 0 ? (<p className=\"error\">{errors.age}</p>) : null}\n    {errors.email.length > 0 ? (<p className=\"error\">{errors.email}</p>) : null}\n    {errors.password.length > 0 ? (<p className=\"error\">{errors.password}</p>) : null}\n    {errors.first_name.length > 0 ? (<p className=\"error\">{errors.name}</p>) : null}\n    \n  </form>\n  );\n}\n\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}